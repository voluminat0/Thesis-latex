\documentclass[a4paper, 12pt]{report}
\usepackage[utf8]{inputenc}
\usepackage[toc,page]{appendix}
\usepackage{graphicx}
\graphicspath{ {images/} }
\usepackage[english]{babel}
\usepackage{listings}
\usepackage{setspace}
\usepackage{caption}
\usepackage{amssymb}% http://ctan.org/pkg/amssymb
\usepackage{pifont}% http://ctan.org/pkg/pifont
\newcommand{\cmark}{\ding{51}}%
\newcommand{\omark}{\ding{109}}%
%\DeclareCaptionFormat{myformat}{#1#2#3\hrulefill}
%\captionsetup{format=myformat}
%\captionsetup[lstlisting]{position=bottom,format=myformat}
% LANGUAGE SETUP FOR LISTINGS

\usepackage{color}
\definecolor{purple}{rgb}{0.65, 0.12, 0.82}
\definecolor{darkgreen}{rgb}{0.13, 0.54, 0.13}

\lstdefinelanguage{JavaScript}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{blue}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{darkgreen}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}

\lstdefinelanguage{JSON}{
  keywords={test},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={testo},
  ndkeywordstyle=\color{blue}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{darkgreen}\ttfamily,
  stringstyle=\color{black}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}

\lstset{
   language=JSON,
   extendedchars=true,
   basicstyle=\footnotesize\ttfamily,
   showstringspaces=false,
   showspaces=false,
   numbers=left,
   numberstyle=\footnotesize,
   numbersep=9pt,
   tabsize=2,
   breaklines=true,
   showtabs=false,
   captionpos=b,
   frame=tb
}

\lstset{
   language=JavaScript,
   extendedchars=true,
   basicstyle=\footnotesize\ttfamily,
   showstringspaces=false,
   showspaces=false,
   numbers=left,
   numberstyle=\footnotesize,
   numbersep=9pt,
   tabsize=2,
   breaklines=true,
   showtabs=false,
   captionpos=b,
   frame=tb
}

\usepackage{blindtext}
\usepackage{enumitem}
 
\usepackage[backend=biber,style=numeric,citestyle=numeric]{biblatex}
\addbibresource{references.bib}
% The following makes latex use nicer postscript fonts.
\usepackage{times}
 
% get clickable links
% http://stackoverflow.com/questions/3244803/latex-add-clickable-links-to-a-section-subsection-with-a-pdf-document
\usepackage{hyperref}
\hypersetup{
  colorlinks   = true,    % Colours links instead of ugly boxes
  urlcolor     = blue,    % Colour for external hyperlinks
  linkcolor    = black,    % Colour of internal links
  citecolor    = black      % Colour of citations
}
 
 
%\usepackage[backend=biber,style=numeric,citestyle=authoryear]{biblatex}
%\usepackage{biblatex}
\makeatletter
% http://tex.stackexchange.com/questions/61204/autocomplete-in-texniccenter-does-not-work-when-biblatex-is-used
% "Since TeXnicCenter does not check for if clauses, it just assumes \bibliography has been used and binds it into the GUI."
%\@ifpackageloaded{biblatex}{\addbibresource{references.bib}}{\bibliography{references}}
\makeatother
       
\usepackage{vubtitlepage}
 
\usepackage{listings}
\hyphenation{mul-ti-di-rec-tio-na-li-ty}
 
\author{Valentijn Spruyt}
\title{Expressing and checking application-specific, user-specified security policies}
\promotor{Prof. Dr. Coen De Roover}
\advisors{Jens Nicolay\\
         Quentin Stievenart}
\degree{Master of Science in Applied Sciences and Engineering: Computer Science}
\faculty{Faculty of Science and Bio-Engineering Sciences}
\advisortitle{Advisors}
\department{Department of Computer Science\\ and Applied Computer Science}
\reason{Graduation thesis submitted in partial fulfillment of the
requirements for the degree of} 

\date{JUNE 2016}
 
\begin{document}

\maketitlepage
 
\advisortitle{Begeleiders}
\faculty{Faculteit Wetenschappen en Bio-\\Ingenieurswetenschappen}
\department{Departement Computerwetenschappen\\en Toegepaste Informatica}
 
\reason{Proefschrift ingediend met het oog op het behalen van de graad
van} %\\
%Master of Science in de Ingenieurswetenschappen: Computerwetenschappen}
\date{JUNI 2016}
 
\maketitlepage


\pagenumbering{roman} % Start roman numbering
\chapter*{Abstract}
 %Security & policies
%Detecting security violations in source code can be tedious, especially when done manually. These violations can usually be split up into several categories, depending on the type of violation.
%daarom is het makkelijk om security policies te gebruiken
 
 %Important because/Not a lot of static JS checkers
 
 %This dissertation ..
 
\chapter*{Acknowledgements}
 
\tableofcontents



%\setcounter{page}{1}
\chapter{Introduction}
\input{chapters/introduction}
\pagenumbering{arabic} % Start roman numbering 

\chapter{Detecting security vulnerabilities}
\input{chapters/background}
 
\chapter{Overview of the approach}
\input{chapters/overview}

\chapter{JS-QL: an internal DSL approach for querying flow graphs}
\input{chapters/JSQL}
 
\chapter{Implementation}
\label{ch:Implementation}
\input{chapters/implementation}
 
\chapter{Evaluation}
\input{chapters/evaluation}
 
\chapter{Conclusion and future work}
\input{chapters/conclusion-and-future-work}

\begin{appendices}
\chapter{Compound Policies}

\begin{lstlisting}[label={lst:WriteToBuiltinObjectPrototype},language=JavaScript,caption=The \texttt{writeToBuiltinObjectPrototype} predicate,mathescape=true]  % float=t?

RegularPathExpression.prototype.writeToBuiltinObjectPrototype = function(obj){
	var obj = obj || {};
	var states = [];
	var frozenObjects = ['Array', 'Boolean', 'Date', 'Function', 'Document', 'Math', 'Window','String'];
	var ret = this.lBrace();
	var objProps = this.getTmpIfUndefined();
	for(var i = 0; i < frozenObjects.length; i++){
		var s = {};
		this.setupStateChain(s, ['node', 'expression', 'left','properties'], objProps);
		this.setupStateChain(s, ['node', 'expression', 'left','mainObjectName'], frozenObjects[i]);
		this.setupFilter(s, 'contains', objProps, 'prototype');
		this.finalize(s, obj);
		states.push(s);
	}
	for(var j = 0; j < states.length; j++){
		if(j !== states.length - 1){
			ret = ret.state(states[j]).or()
		}
		else{
			ret = ret.state(states[j]).rBrace();
		}
	}
	return ret;
}
\end{lstlisting}

\end{appendices}

\printbibliography
\end{document}